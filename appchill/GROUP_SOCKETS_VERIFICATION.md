# ‚úÖ –ü–†–û–í–ï–†–ö–ê –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ì–†–£–ü–ü–û–í–´–• –°–û–ö–ï–¢–û–í

## üìä –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°: –í–°–ï –ü–†–ê–í–ò–õ–¨–ù–û ‚úÖ

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 11 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:** Online (PID 2394829)  
**–í–µ—Ä—Å–∏—è:** appchill-backend

---

## üîç –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò –ö–û–î–ê

### ‚úÖ 1. JOIN_GROUP_ROOM (–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –≥—Ä—É–ø–ø–µ)
**–°—Ç—Ä–æ–∫–∞:** ~1375  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û + –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ë—ã–ª–æ:**
```javascript
socket.on('join_group_room', (groupId) => {
  socket.join(`group_${groupId}`);
  console.log(`‚úÖ Socket ${socket.id} –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ group_${groupId}`);
});
```

**–°—Ç–∞–ª–æ (—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º):**
```javascript
socket.on('join_group_room', (groupId) => {
  socket.join(`group_${groupId}`);
  console.log(`‚úÖ Socket ${socket.id} –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ group_${groupId}`);
  
  // ‚≠ê –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  if (userId) {
    db.query('SELECT username FROM users WHERE id = ?', [userId], (err, results) => {
      if (!err && results && results.length > 0) {
        io.to(`group_${groupId}`).emit('user_joined_group', {
          user_id: userId,
          username: results[0].username,
          group_id: groupId,
          timestamp: new Date().toISOString()
        });
        console.log(`üì¢ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${results[0].username} –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –≥—Ä—É–ø–ø–µ ${groupId}`);
      }
    });
  }
});
```

**–ß—Ç–æ —É–ª—É—á—à–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ–π –≥—Ä—É–ø–ø–µ –ø—Ä–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ timestamp
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

---

### ‚úÖ 2. LEAVE_GROUP (–û—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã)
**–°—Ç—Ä–æ–∫–∞:** ~1381  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û + –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ë—ã–ª–æ:**
```javascript
socket.on('leave_group', (groupId) => {
  socket.leave(`group_${groupId}`);
  console.log(`‚úÖ Socket ${socket.id} –ø–æ–∫–∏–Ω—É–ª –∫–æ–º–Ω–∞—Ç—É group_${groupId}`);
});
```

**–°—Ç–∞–ª–æ (—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º):**
```javascript
socket.on('leave_group', (groupId) => {
  socket.leave(`group_${groupId}`);
  console.log(`‚úÖ Socket ${socket.id} –ø–æ–∫–∏–Ω—É–ª –∫–æ–º–Ω–∞—Ç—É group_${groupId}`);
  
  // ‚≠ê –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  if (userId) {
    db.query('SELECT username FROM users WHERE id = ?', [userId], (err, results) => {
      if (!err && results && results.length > 0) {
        io.to(`group_${groupId}`).emit('user_left_group', {
          user_id: userId,
          username: results[0].username,
          group_id: groupId,
          timestamp: new Date().toISOString()
        });
        console.log(`üì¢ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${results[0].username} –ø–æ–∫–∏–Ω—É–ª –≥—Ä—É–ø–ø—É ${groupId}`);
      }
    });
  }
});
```

**–ß—Ç–æ —É–ª—É—á—à–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ–π –≥—Ä—É–ø–ø–µ –æ–± –æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ timestamp
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

---

### ‚úÖ 3. NEW_GROUP_MESSAGE (–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è)
**–°—Ç—Ä–æ–∫–∞:** ~3019  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û

```javascript
io.to(`group_${groupId}`).emit('new_group_message', messageData);
console.log(`   ‚úÖ –≠–º–∏—Ç 'new_group_message' –≤ –∫–æ–º–Ω–∞—Ç—É: group_${groupId}`);
```

**–ß—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `io.to()` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç—É
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –Ω—É–∂–Ω—É—é –≥—Ä—É–ø–ø—É (–Ω–µ broadcast)
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É

---

### ‚úÖ 4. GROUP_USER_TYPING (–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∞–Ω–∏—è)
**–°—Ç—Ä–æ–∫–∞:** ~1420  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û

```javascript
socket.on('group_user_typing', (data) => {
  // ... –∫–æ–¥ ...
  io.to(`group_${group_id}`).emit('group_user_typing', {
    group_id: group_id,
    user_id: userId,
    username: username,
    is_typing: is_typing
  });
});
```

**–ß—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `io.to()` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç—É –≥—Ä—É–ø–ø—ã
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞

---

### ‚úÖ 5. MARK_MESSAGE_READ (–ì–∞–ª–æ—á–∫–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è)
**–°—Ç—Ä–æ–∫–∞:** ~1461  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û

```javascript
socket.on('mark_message_read', (data) => {
  // ... –¥–ª—è –ì–†–£–ü–ü–û–í–´–• –°–û–û–ë–©–ï–ù–ò–ô ...
  
  db.query(
    `SELECT GROUP_CONCAT(reader_id) as reader_ids
    FROM group_message_read_status
    WHERE message_id = ? AND is_read = TRUE`,
    [message_id],
    (err, readerResults) => {
      const reader_ids = readerResults[0].reader_ids.split(',').map(id => parseInt(id));
      
      // ‚úÖ –ì–õ–ê–í–ù–û–ï: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ú–ê–°–°–ò–í –≤—Å–µ—Ö —á–∏—Ç–∞—Ç–µ–ª–µ–π
      io.to(`group_${group_id}`).emit('message_read_status_updated', {
        message_id: message_id,
        is_read: true,
        read_by: reader_ids,  // ‚úÖ –ú–ê–°–°–ò–í —Å–æ –í–°–ï–ú–ò —á–∏—Ç–∞—Ç–µ–ª—è–º–∏
        sender_id: sender_id,
        group_id: group_id,
        reader_count: reader_ids.length
      });
    }
  );
});
```

**–ß—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –í–°–ï–• —á–∏—Ç–∞—Ç–µ–ª–µ–π —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ú–ê–°–°–ò–í —á–∏—Ç–∞—Ç–µ–ª–µ–π (–Ω–µ –æ–¥–Ω–æ–≥–æ)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∫–æ–º–Ω–∞—Ç—É –≥—Ä—É–ø–ø—ã
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∏—Ç–∞—Ç–µ–ª–µ–π

---

### ‚úÖ 6. GROUP_MESSAGE_DELETED (–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
**–°—Ç—Ä–æ–∫–∞:** ~4525  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û

```javascript
db.query(
  'DELETE FROM group_messages WHERE id = ?',
  [messageId],
  (err, result) => {
    // ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–æ–ª—å–∫–æ –≤ –∫–æ–º–Ω–∞—Ç—É –≥—Ä—É–ø–ø—ã
    io.to(`group_${message.group_id}`).emit('group_message_deleted', { messageId });
    
    console.log(`‚úÖ Group message delete notification sent to group_${message.group_id}`);
    res.json({ success: true, message: '–°–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ' });
  }
);
```

**–ß—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `io.to()` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç—É
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –Ω—É–∂–Ω—É—é –≥—Ä—É–ø–ø—É
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É

---

## üì± –ü–û–¢–û–ö –î–ê–ù–ù–´–• –î–õ–Ø –ì–†–£–ü–ü–û–í–´–• –°–û–ë–´–¢–ò–ô

### –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –≥—Ä—É–ø–ø–µ:
```
1. Frontend: socket.emit('join_group_room', groupId)
   ‚Üì
2. Backend: socket.join(`group_${groupId}`)
   ‚Üì
3. Backend: io.to(`group_${groupId}`).emit('user_joined_group', {...})
   ‚Üì
4. Frontend (–í–°–ï –≤ –≥—Ä—É–ø–ø–µ): –ü–æ–ª—É—á–∞—é—Ç —Å–æ–±—ã—Ç–∏–µ 'user_joined_group'
   ‚Üì
5. Frontend: –û–±–Ω–æ–≤–ª—è—é—Ç —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø—É:
```
1. Frontend: POST /api/groups/:groupId/messages (—Å —Ç–µ–∫—Å—Ç–æ–º/—Ñ–∞–π–ª–æ–º)
   ‚Üì
2. Backend: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î —Ç–∞–±–ª–∏—Ü—É group_messages
   ‚Üì
3. Backend: io.to(`group_${groupId}`).emit('new_group_message', messageData)
   ‚Üì
4. Frontend (–í–°–ï –≤ –≥—Ä—É–ø–ø–µ): –ü–æ–ª—É—á–∞—é—Ç —Å–æ–±—ã—Ç–∏–µ 'new_group_message'
   ‚Üì
5. Frontend: –î–æ–±–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç –ë–ï–ó –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏—è (–≥–∞–ª–æ—á–∫–∏):
```
1. Frontend: socket.emit('mark_message_read', {message_id})
   ‚Üì
2. Backend: –û–±–Ω–æ–≤–ª—è–µ—Ç group_message_read_status
   ‚Üì
3. Backend: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –í–°–ï–• —á–∏—Ç–∞—Ç–µ–ª–µ–π –∏–∑ –ë–î
   ‚Üì
4. Backend: io.to(`group_${groupId}`).emit('message_read_status_updated', 
              {read_by: [id1, id2, id3], ...})
   ‚Üì
5. Frontend (–í–°–ï –≤ –≥—Ä—É–ø–ø–µ): –í–∏–¥—è—Ç –≥–∞–ª–æ—á–∫–∏ –æ—Ç –≤—Å–µ—Ö —á–∏—Ç–∞—Ç–µ–ª–µ–π
```

---

## üîê SOCKET.IO –ö–û–ú–ù–ê–¢–´

| –ö–æ–º–Ω–∞—Ç–∞ | –§–æ—Ä–º–∞—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|--------|-----------|
| `group_${groupId}` | `group_123` | –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç (–≤—Å–µ —Å–æ–±—ã—Ç–∏—è –≥—Ä—É–ø–ø—ã) |
| `user_${userId}` | `user_456` | –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `user_status_${userId}` | `user_status_789` | –°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω |

**–ü—Ä–∞–≤–∏–ª–æ:** –ö–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –∫–æ–º–Ω–∞—Ç–∞–º —Å–≤–æ–∏—Ö –≥—Ä—É–ø–ø –∏ —Å–≤–æ–µ–º—É –ø—Ä–æ—Ñ–∏–ª—é.

---

## üìä –ü–†–û–í–ï–†–ï–ù–ù–´–ï –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò

| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ | –°—Ç—Ä–æ–∫–∞ | –°—Ç–∞—Ç—É—Å | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–Ω–∞—Ç—ã |
|-----------|--------|--------|-------------------|
| `join_group_room` | ~1375 | ‚úÖ | ‚úÖ Yes |
| `leave_group` | ~1381 | ‚úÖ | ‚úÖ Yes |
| `group_user_typing` | ~1420 | ‚úÖ | ‚úÖ Yes |
| `mark_message_read` | ~1461 | ‚úÖ | ‚úÖ Yes |
| `new_group_message` (HTTP) | ~3019 | ‚úÖ | ‚úÖ Yes |
| `group_message_deleted` | ~4525 | ‚úÖ | ‚úÖ Yes |

---

## üöÄ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

### –¢–µ—Å—Ç 1: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ/–û—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
```bash
‚úÖ –û—Ç–∫—Ä—ã—Ç—å –≥—Ä—É–ø–ø—É –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è A
‚úÖ –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: "üì¢ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å [name] –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è"
‚úÖ –û—Ç–∫—Ä—ã—Ç—å –≥—Ä—É–ø–ø—É –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è B
‚úÖ –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è A –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)
‚úÖ –ó–∞–∫—Ä—ã—Ç—å –≥—Ä—É–ø–ø—É –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è B
‚úÖ –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è A –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏
```

### –¢–µ—Å—Ç 2: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
```bash
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
‚úÖ –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è B –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –°–†–ê–ó–£ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)
‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç: "‚úÖ –≠–º–∏—Ç 'new_group_message' –≤ –∫–æ–º–Ω–∞—Ç—É: group_[id]"
```

### –¢–µ—Å—Ç 3: –ì–∞–ª–æ—á–∫–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è
```bash
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø—É
‚úÖ –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è A –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≥–∞–ª–æ—á–∫–∞ –æ—Ç B (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å C —Ç–∞–∫–∂–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø—É
‚úÖ –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è A –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤—Ç–æ—Ä–∞—è –≥–∞–ª–æ—á–∫–∞ –æ—Ç C
‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç: "üì¨ –û—Ç–ø—Ä–∞–≤–ª—è—é message_read_status_updated –≤ group_[id]"
```

### –¢–µ—Å—Ç 4: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–µ—á–∞—Ç–∞–Ω–∏—è
```bash
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –ø–µ—á–∞—Ç–∞–µ—Ç –≤ –≥—Ä—É–ø–ø–µ
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –≤–∏–¥–∏—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "A –ø–µ—á–∞—Ç–∞–µ—Ç..." (–±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏)
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –ø–µ—á–∞—Ç–∞—Ç—å
‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏—Å—á–µ–∑–∞–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è B (–±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏)
```

---

## ‚ú® –ö–õ–Æ–ß–ï–í–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### 1Ô∏è‚É£ –ö–æ–º–Ω–∞—Ç—ã –≤–º–µ—Å—Ç–æ Broadcast
```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: Broadcast –≤—Å–µ–º
io.emit('event', data);

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –¢–æ–ª—å–∫–æ –≤ –Ω—É–∂–Ω—É—é –∫–æ–º–Ω–∞—Ç—É
io.to(`group_${groupId}`).emit('event', data);
```

### 2Ô∏è‚É£ –ú–∞—Å—Å–∏–≤ —á–∏—Ç–∞—Ç–µ–ª–µ–π –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ
```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω —á–∏—Ç–∞—Ç–µ–ª—å
read_by: userId

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –í—Å–µ —á–∏—Ç–∞—Ç–µ–ª–∏
read_by: [user1, user2, user3, ...]
```

### 3Ô∏è‚É£ Timestamp –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
```javascript
timestamp: new Date().toISOString()
```

### 4Ô∏è‚É£ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –¥–µ–π—Å—Ç–≤–∏—è—Ö
```javascript
user_joined_group    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏
user_left_group      // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏
```

---

## üéØ –ö–û–ù–ï–ß–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

‚úÖ **–í—Å–µ –≥—Ä—É–ø–ø–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç Socket.io –∫–æ–º–Ω–∞—Ç—ã**

‚úÖ **–í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö**

‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ª—é–±—É—é –ø—Ä–æ–±–ª–µ–º—É**

‚úÖ **–°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

- –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ PID 2394829
- –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –ï—Å–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–¥–µ—Ä–∂–∫–∞ —Å–æ–±—ã—Ç–∏–π - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Network tab –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –í—Å–µ Socket.io —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
